 <layout name="layout" /> 
  <!-- content start -->
  <div class="admin-content">
    <div class="am-cf am-padding">
      <div class="am-fl am-cf">
      		<strong class="am-text-primary am-text-lg"><{$_SESSION['proid']|getPro=###}></strong> / 
      		<small>
	      		<b> 产品：</b><{$arr.po|getRealname=###}>
	      		<b> 项目：</b><{$arr.pm|getRealname=###}>
	      		<b> 研发：</b><{$arr.rd|getRealname=###}>
	      		<b> 测试：</b><{$arr.qd|getRealname=###}>
      		</small>
      </div>
    </div>  
    <div class="am-g">  
	  <div class="am-u-md-9">	  			  		
	  		<div class="am-tabs am-margin" data-am-tabs>
			    <ul class="am-tabs-nav am-nav am-nav-tabs">
			      <li class="am-active"><a href="#tab1">里程碑 <span class="am-badge"><{$_SESSION['proid']|countStage=###}></span></a></li>
			      <li><a href="#tab2">风险 <span class="am-badge"><{$_SESSION['proid']|countRisk=###}></span></a></li>
			      <li><a href="#tab3">涉及系统 <span class="am-badge"><{$_SESSION['proid']|countProsys=###}></span></a></li>
			      <li><a href="#tab4">功能点 <span class="am-badge"><{$_SESSION['proid']|countProFunc=###}></span></a></li>
			      <li><a href="#tab5">范围 <span class="am-badge"><{$_SESSION['proid']|countRange=###}></span></a></li>
			      <li><a href="#tab6">场景 <span class="am-badge"><{$_SESSION['proid']|countScene=###}></span></a></li>
			      <li><a href="#tab7">用例 <span class="am-badge"><{$_SESSION['proid']|countCase=###}></span></a></li>
			      <li><a href="#tab8">需求 <span class="am-badge"></span></a></li>
			    </ul>
			    <div class="am-tabs-bd">
			    	<!-- 里程碑 -->
			    	<div class="am-tab-panel am-fade am-in am-active" id="tab1">
			    		<div class="am-g">			    		
			    			<div class="am-u-md-10"></div>
			    			<div class="am-u-md-2">	
				    			<div class="am-btn-group">
				    				<a href="__APP__/<{$Think.config.PRODUCT}>/Stage/add"  class="am-btn am-btn-success"><span class="am-icon-plus"></span> 新增</a>	
				    			</div>			    				
			    			</div>	              
			            </div>
			    		<form action="__URL__/order" method="post" >
					   	<input type="hidden" name="table" value="tp_stage" />
						<table class="am-table am-table-striped am-table-hover table-main">
				           <thead><tr><th class="table-sn">序号</th><th class="table-stage">里程碑</th><th class="table-sn">结束日期</th><th class="table-sn">状态</th><th class="table-sn">操作</th></tr></thead>					      
					      <tbody>					      		
					      <volist name='stages' id='st' empty="没有数据"> 	
					          <tr>
					            <td  width=10% align="center"><input type="text" name="sn[<{$st.id}>]" value="<{$st.sn}>"  class="input40"/></td>
					            <td  width=30% ><{$st.stage}></td>
					            <td  width=10% ><{$st.end}></td>
					            <td  width=10% ><a href="__APP__/<{$Think.config.PRODUCT}>/Stage/modstate/id/<{$st.id}>/state/<{$st.state}>" class="am-badge"><{$st.state}></a></td>
					            <td  width=30%>	
					            	<a target="_blank" href="__APP__/<{$Think.config.PRODUCT}>/Stagetester/index/stageid/<{$st.id}>/type/C" class="am-btn am-btn-primary am-btn-xs">编写用例 <{$st.id|countCTester=###}></a>
						            <a target="_blank" href="__APP__/<{$Think.config.PRODUCT}>/Stagetester/index/stageid/<{$st.id}>/type/M" class="am-btn am-btn-warning am-btn-xs">手工测试 <{$st.id|countMTester=###}></a>	
						            <!--  <a target="_blank" href="__APP__/<{$Think.config.PRODUCT}>/Stagetester/index/stageid/<{$st.id}>/type/A" class="am-btn am-btn-primary am-btn-xs">自动化<{$st.id|countATester=###}></a>-->
						            <a href="__APP__/<{$Think.config.PRODUCT}>/Stage/mod/id/<{$st.id}>" class="am-btn am-btn-default am-btn-xs am-text-secondary"><span class="am-icon-pencil-square-o"> 修改</span></a>
						            <a href="__URL__/realdel/id/<{$st.id}>/table/tp_stage" class="am-btn am-btn-default am-btn-xs am-text-danger"><span class="am-icon-trash-o" onclick="return confirm('你确定要移除：<{$st.stage}>吗？')"> 删除</span> </a>					            		
					            </td>					            		
					          </tr>
					       </volist>					            
					     </tbody>					     
				      </table>
					  <div class='am-btn-group'>
		            	<input type="submit" name="do_submit" value="批量排序" class="am-btn am-btn-primary">
		              </div>		            
		            </form> 
			    	</div>
			    	<!-- 里程碑 END-->
			    	
			    	<!-- 项目风险 -->
			    	<div class="am-tab-panel am-fade am-in am-active" id="tab2">
			    		<div class="am-btn-group am-pull-right">
			              <a href="__APP__/<{$Think.config.PRODUCT}>/Stage/add"  class="am-btn am-btn-success"><span class="am-icon-plus"></span> 新增</a>			              
			            </div>
			    		<form action="__URL__/order" method="post" >
					   	<input type="hidden" name="table" value="tp_risk" />
						<table class="am-table am-table-striped am-table-hover table-main">
				           <thead><tr><th class="table-sn">序号</th><th class="table-stage">项目风险</th><th class="table-sn">日期</th><th class="table-sn">状态</th><th class="table-do">操作</th></tr></thead>					      
					      <tbody>					      		
					      <volist name='risks' id='st' empty="没有数据"> 	
					          <tr>
					            <td><input type="text" name="sn[<{$st.id}>]" value="<{$st.sn}>"  class="input40"/></td>
					            <td><{$st.stage}></td>
					            <td><{$st.end}></td>
					            <td><{$st.state}></td>
					            <td>						            	
						            <a href="__APP__/<{$Think.config.PRODUCT}>/Risk/mod/id/<{$st.id}>" class="am-btn am-btn-default am-btn-xs am-text-secondary"><span class="am-icon-pencil-square-o"> 修改</span></a>
						            <a href="__APP__/<{$Think.config.PRODUCT}>/Risk/del/id/<{$st.id}>" class="am-btn am-btn-default am-btn-xs am-text-danger"><span class="am-icon-trash-o"> 删除</span> </a>					            		
					            </td>					            		
					          </tr>
					       </volist>					            
					     </tbody>					     
				      </table>
					  <div class='am-btn-group'>
		            	<input type="submit" name="do_submit" value="批量排序" class="am-btn am-btn-primary">
		              </div>		            
		            </form> 
			    	</div>
			    	<!-- 项目风险 END-->
			    	
			    	<!-- 系统平台 -->
			    	<div class="am-tab-panel am-fade am-in am-active" id="tab3">
			    		<div class="am-g">  
	  						<div class="am-u-md-8">
	  							<table class="am-table am-table-striped am-table-hover table-main">
						           <thead><tr><th class="table-sn">项目关联平台</th></tr></thead>					      
							      <tbody>					      		
							      <volist name='prosys' id='st' empty="没有数据"> 	
							          <tr>					            
							            <td width=60%><{$st.name}></td>					            
							            <td width=40%>	
								            <a href="__APP__/<{$Think.config.PRODUCT}>/Path/index/sysid/<{$st.branch}>" class="am-btn am-btn-primary am-btn-xs">
								            <span class="am-icon-file"> 模块 <{$st.branch|countPath=###}></span>
								            </a>
								            <a href="__APP__/<{$Think.config.PRODUCT}>/Prosys/mod/id/<{$st.id}>" class="am-btn am-btn-default am-btn-xs am-text-secondary">
								            	<span class="am-icon-pencil-square-o"> 修改</span>
								            </a>
								            <a href="__APP__/<{$Think.config.PRODUCT}>/Prosys/realdel/id/<{$st.id}>/table/tp_prosys" 
								            class="am-btn am-btn-default am-btn-xs am-text-danger" onclick="return confirm('你确定要从项目中移除：<{$st.name}>系统吗？')">
								            	<span class="am-icon-trash-o"> 删除</span> 
								            </a>				            		
							            </td>					            		
							          </tr>
							       </volist>					            
							     </tbody>					     
						      </table>	
	  						</div>
	  						<div class="am-u-md-4">
	  							<table class="am-table am-table-striped am-table-hover table-main">
						           <thead><tr><th class="table-sn">备选平台</th></tr></thead>					      
							      <tbody>					      		
							      <volist name='syses' id='st' empty="没有数据"> 	
							          <tr>					            
							            <td width=70%><{$st.name}></td>					            
							            <td width=30%>	
								            <a href="__APP__/<{$Think.config.PRODUCT}>/Prosys/insert/branch/<{$st.id}>/project/<{$_SESSION['proid']}>/url/tab3"
								             class="am-btn am-btn-danger am-btn-xs">关联</a>								            			            		
							            </td>					            		
							          </tr>
							       </volist>					            
							     </tbody>					     
						      </table>	
	  						</div>
	  					</div>
										 
			    	</div>
			    	<!-- 系统平台 END-->
			    	
			    	<!-- 系统功能 -->
			    	<div class="am-tab-panel am-fade am-in am-active" id="tab4">
						<table class="table table-striped table-bordered table-hover table-condensed ">
						<thead><tr><th class="table-sn">系统功能点</th></tr></thead>		
				         <volist name='funcs' id='st' empty="没有数据">
				            <switch name="st.fproid">
								<case value="$_SESSION['proid']"> <tr class="info"></case>
								<default /><tr class="default">
							</switch>
				                <td align="left" >
				                	<span class="label label-default"><{$st.branch|getBranchName=###}></span>
				                	<span class="label label-info"><{$st.parent|getModuleName=###}></span>
				                	<span class="label label-info"><{$st.name}></span>
				                	<b><{$st.func}>(ID:<{$st.id}>)</b>
				                	<span class="label label-default"><{$st.state}></span>
				                   <div class="btn-group pull-right">
				                   		<a href="__APP__/<{$Think.config.PRODUCT}>/Func/modproid/id/<{$st.id}>/fproid/<{$_SESSION['proid']}>"  class="btn btn-warning btn-xs"
				                   		onclick="return confirm('你确定要变更该功能的所属项目吗？')" ><{$st.fproid|getProNo=###}>
				                       	</a>
										<a target="_blank" href="__APP__/<{$Think.config.PRODUCT}>/Case/index/funcid/<{$st.id}>" class="btn btn-info btn-xs" >用例 
											<span class="badge"><{$st.id|countFCase=###}></span>
										</a>						
									</div>
				               </td>                  
				            </tr>
				            </volist>
				       </table>			 
			    	</div>
			    	<!-- 系统功能 END-->
			    	
			    	<!-- 测试范围 -->
			    	<div class="am-tab-panel am-fade am-in am-active" id="tab5">
			    		<div class="am-g">			    		
			    			<div class="am-u-md-10"></div>
			    			<div class="am-u-md-2">	
				    			<div class="am-btn-group">
				    				<a href="__APP__/<{$Think.config.PRODUCT}>/Func/resetAll/proid/<{$_SESSION['proid']}>" class="am-btn am-btn-success">重置</a>
				    			</div>			    				
			    			</div>	              
			            </div>
						<div class="panel-group" id="accordion" role="tablist" aria-multiselectable="true">
						    <volist name='ranges' id='st' empty="没有数据">
						      <switch name="st.result">
						          <case value="通过"><div class="panel panel-success"></case>
						          <case value="失败"><div class="panel panel-danger"></case>
						          <default /><div class="panel panel-default">
						      </switch>      
						        <div class="panel-heading" role="tab" id="heading<{$st.id}>">
						          <h4 class="panel-title">
						              <a data-toggle="collapse" data-parent="#accordion" href="#<{$st.id}>" aria-expanded="true" aria-controls="<{$st.id}>">
						                  <span class="badge"><{$st.result}></span>
						                  <span class="label label-default"><{$st.branch|getBranchName=###}></span>
						                  <span class="label label-info"><{$st.parent|getModuleName=###}></span>
						                  <span class="label label-info"><{$st.name}></span><b><{$st.func}></b>
						                  <!-- <span class="label label-default"><{$st.state}></span> -->
						                  <span class="badge">历史:<{$st.id|countFResult=###}>/<{$st.id|countFQResult=###}></span>
						              </a>
						              <div class="btn-group pull-right">
							             <a target="_blank" href="__APP__/TAdmin/Case/index/funcid/<{$st.id}>" class="btn btn-success btn-xs">用例
							               <{$st.id|countFCase=###}></a>        			           
							            <a target="_blank" href="__APP__/TAdmin/Element/index/funcid/<{$st.id}>" class="btn btn-warning btn-xs">模板</a>			            
							          </div>
						            </h4>
						        </div>
						        <div id="<{$st.id}>" class="panel-collapse collapse" role="tabpanel" aria-labelledby="heading<{$st.id}>">		          		          			            
						             	<div class="btn-group pull-left">
								          	<a href="__URL__/reset/funcid/<{$st.id}>" type="button" 
								          	class="btn btn-warning btn-xs" onclick="return confirm('测试结果将被置为“未测试”')">重置</a>
						                  	<a href="__URL__/pass/funcid/<{$st.id}>" type="button" class="btn btn-success btn-xs">通过</a>
				                  		</div><br>
						              <ul class="list-group"><{$st.id|getTest=###}></ul>	           
						        </div>
						      </div>
						    </volist>
						</div>	 
			    	</div>
			    	<!-- 测试范围 END-->
			    	
			    	
			    	
			    	<!-- 项目用例-->
			    	<div class="am-tab-panel am-fade am-in am-active" id="tab7">
			    		<table class="am-table am-table-striped am-table-hover table-main">
				           <thead><tr>
				           	<th width=3% align="center" bgcolor="#ccc">ID</th>
			                <th width=10% align="left" bgcolor="#ccc">路径</th>
			                <th width=7% align="left" bgcolor="#ccc">功能</th>
			                <th width=7% align="left"  bgcolor="#ccc">意图 </th>               
			                <th width=5% align="center" bgcolor="#ccc">状态</th>
			                <th width=10% align="left"  bgcolor="#ccc">预期</th>				
			                <th width=5% align="center" bgcolor="#ccc">操作 </th>
				           
				           </tr></thead>					      
					      <tbody>					      		
					      <volist name='cases' id='case' empty="没有数据"> 	
					          <tr>
					            <td align="center" ><{$case.id}></td>
					            <td align="left" ><{$case.branch|getBranchName=###}>-<{$case.parent|getModuleName=###}>-<{$case.name}></td>
					            <td align="left" ><{$case.func}></td>
					            <form action="__URL__/update" method="post" >
					               <input type="hidden" name="id" value="<{$case.id}>" />
					               <input type="hidden" name="table" value="tp_case" />
					            <td align="left" ><textarea rows="2" cols="30" name="main" ><{$case.main}></textarea></td>            
					            <td align="center" ><{$case.state}></td>
					            <td align="left" ><textarea rows="2" cols="30" name="expected"><{$case.expected}></textarea></td>
								<td align="center" ><button>修改</button></form></td>        					            		
					          </tr>
					       </volist>					            
					     </tbody>					     
				      </table>
			    	
			    	</div>
			    	<!-- 项目用例END-->
			    	
			    	
			    	<!-- 项目需求-->
			    	<div class="am-tab-panel am-fade am-in am-active" id="tab8">
			    	<div class="panel panel-default">
						<div class="starter-template">             
					        <div class="panel-group" id="accordion" role="tablist" aria-multiselectable="true">               
					         	<volist name='rules' id='st' empty="没有规则">
						            <div class="panel panel-default">
										<div class="panel-heading" role="tab" id="heading<{$st.id}>">
											<h5 class="panel-title">
												<a data-toggle="collapse" data-parent="#accordion" href="#<{$st.id}>" aria-expanded="true" aria-controls="<{$st.id}>">						    	                                
									                <{$st.id}>:<b><{$st.branch|getBranchName=###}>-<{$st.moduleid|getModuleName=###}></b>【#<{$st.version}>】<{$st.title}>
											        <span class='pull-right'>
											        <span class="label label-info"><{$st.status}></span> 
											        <span class="label label-warning"><{$st.openedby|getZTUserName=###}></span>  
										         	<span class="badge"><{$st.lastediteddate}></span><br>		         	          	                  	         	                	                
									           		</span>															      
											 </h5>
										 </div>
										 <div id="<{$st.id}>" class="panel-collapse collapse" role="tabpanel" aria-labelledby="heading<{$pro.id}>">
											    <div class="panel-body">
												    <ul class="list-group"><{$st.id|getStorySpec=###}></ul>
											    </div>
										</div>
						  			</div>                     
					            </volist>
					        </div>
					     </div> 		
						</div>
			    	</div>
			    	<!-- 项目需求 END-->			    
			    </div>			    
    		</div>    			   	
	  </div>
	  <div class="am-u-md-3">
	      <div class="am-panel am-panel-default admin-sidebar-panel">
		      <div class="am-panel-bd">
		        <p><span class="am-icon-tag"></span> 项目详情</p>
		        <p><{$arr.desc}></p>
		      </div>
		    </div>
	  </div>  
	</div>   
  </div>
  <!-- content end -->
  
  
 